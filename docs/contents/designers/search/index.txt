[h2]Search Module[/h2]

The search module is a powerful way to open up all of your site's standard content and products to users with a one-keyword search.  Only standard content types (with a title & URL) can be included in search results.

Search options (e.g., what content is searchable) are configured at Configuration > Search in the control panel.

[h2]Creating a Search Form[/h2]

To create a search form, you need to setup a form with the following attributes:

* Form Action: {url path="search"}
* Form Method: GET

It must contain one text field named "q".  This will contain the user's query.

[h2]Example Search Form[/h2]

[code]
<form action="{url path="search"}" method="GET">
Search Query: <input type="text" name="q" />&nbsp;&nbsp;<input type="submit" name="do_search" value="Search" />
</form>
[/code]

[h2]Displaying Search Results[/h2]

All search results are displayed with the "search.thtml" template in your theme directory.

The following variables are available in the search template at all times:

* [span_code]{$searching}[/span_code] (TRUE or FALSE if we are actively doing a search or not)
* [span_code]{$query}[/span_code]

If we are actively searching:

* [span_code]{$num_results}[/span_code] (check to see if this == "0" before looping through results)
* [span_code]{$results}[/span_code] (an array of results containing the items below)
* [span_code]{$pagination}[/span_code]

Each result item has a "result_type" field which says whether it is "content" or "product".  For example, you would use something like this:

[code]
{if $searching == TRUE}
	{if $num_results > 0}
	{foreach $results as $result}
		{if $result.result_type == "content"}
			{* This is a content item.  We will use content tags. *}
		{else}
			{* This is a product item.  We will use product tags. *}
		{/if}
	{/foreach}
	{else}
		There were not results matching your query.
	{/if}
{/if}
[/code]

Each *content* type item has the following tags:

* [span_code]{$id}[/span_code]
* [span_code]{$title}[/span_code]
* [span_code]{$date}[/span_code]
* [span_code]{$modified_date}[/span_code]
* [span_code]{$author_id}[/span_code]
* [span_code]{$author_username}[/span_code]
* [span_code]{$author_first_name}[/span_code]
* [span_code]{$author_last_name}[/span_code]
* [span_code]{$author_email}[/span_code]
* [span_code]{$type_id}[/span_code]
* [span_code]{$type_name}[/span_code]
* [span_code]{$url_path}[/span_code] (relative URL to the content)
* [span_code]{$url}[/span_code] (absolute URL to the content)
* [span_code]{$summary}[/span_code] (the auto-generated summary field, specified in search configuration)
* [span_code]{$relevance}[/span_code] (the search relevance, e.g., 1.345070991)
* plus a tag for each of their custom fields like [span_code]{$custom_field_name}[/span_code]

Each *product* type item has the following tags:

* [span_code]{$id}[/span_code]
* [span_code]{$url}[/span_code] (absolute URL to product page)
* [span_code]{$collections}[/span_code] (array of collection ID's)
* [span_code]{$name}[/span_code]
* [span_code]{$description}[/span_code]
* [span_code]{$price}[/span_code]
* [span_code]{$weight}[/span_code]
* [span_code]{$requires_shipping}[/span_code] (TRUE or FALSE)
* [span_code]{$track_inventory}[/span_code] (TRUE or FALSE)
* [span_code]{$inventory}[/span_code] (# of inventory in stock)
* [span_code]{$inventory_allow_oversell}[/span_code] (do we allow overselling?)
* [span_code]{$sku}[/span_code] (SKU #)
* [span_code]{$is_taxable}[/span_code] (TRUE or FALSE)
* [span_code]{$is_download}[/span_code] (TRUE or FALSE)
* [span_code]{$download_name}[/span_code]
* [span_code]{$download_size}[/span_code]
* [span_code]{$feature_image}[/span_code]
* [span_code]{$summary}[/span_code] (based on the "description" field, this summary doesn't contain any HTML and may be shortened to meet the settings specified in search configuration)
* [span_code]{$relevance}[/span_code] (the search relevance, e.g., 1.345070991)